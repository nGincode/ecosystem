(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{1433:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/company",function(){return l(6719)}])},6719:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return Company}});var t=l(5893),s=l(7294),r=l(6501),d=l(9335),n=l(5121),i=l(9761),c=l(2824),o=l(8036);function Company(e){let{userData:a,setuserData:l}=e,[m,u]=(0,s.useState)([]),[p,v]=(0,s.useState)(),[x,b]=(0,s.useState)(),[h,j]=(0,s.useState)(""),N="/api/company",f="Company";"undefined"!=typeof document&&(document.title=f),(0,s.useEffect)(()=>{var e,l,t,s,d,i;let handleApiFirst=async function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],"view"===e)try{await (0,n.Z)({method:"GET",url:N+"?dataUser=1",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{b(e.data.data)})}catch(e){r.ZP.error(e.response.data.massage)}};handleApiFirst("view"),u(null!==(i=null==a?void 0:null===(d=a.permission)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:null===(t=s.map(e=>e.data.find(e=>{if(e.label==f)return e})))||void 0===t?void 0:null===(l=t.filter(e=>void 0!==e))||void 0===l?void 0:null===(e=l[0])||void 0===e?void 0:e.checklist)&&void 0!==i?i:[])},[a]);let handleApi=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("create"===e)try{await (0,n.Z)({method:"POST",url:N,data:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{v(e.data.data),r.ZP.success(e.data.massage),$(".btn-close").trigger("click"),document.getElementById("formCreate").reset()})}catch(e){r.ZP.error(e.response.data.massage)}},g=[{name:"npwp",type:"number",id:"npwp",required:!0},{name:"name",type:"text",id:"name",required:!0},{name:"phone",type:"text",id:"byphone",required:!0},{name:"email",type:"email",id:"email",required:!1},{full:!0,type:"address",required:!0},{type:"selectMulti",name:"users",label:"Users",full:!0,require:!0,select:x}],convertCamelCase=e=>{if(!e)return"";{let a=e.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"col-12",children:(0,t.jsx)("h1",{className:"hp-mb-0 text-4xl font-bold",children:f})}),(0,t.jsxs)("div",{className:"row mb-32 gy-32",children:[(0,t.jsx)("div",{className:"col-12 mt-10",children:(0,t.jsxs)("div",{className:"row g-16 align-items-center justify-content-end",children:[(0,t.jsx)("div",{className:"col-12 col-md-6 col-xl-4",children:(0,t.jsx)("div",{className:"input-group align-items-center",children:(0,t.jsx)(o.Z,{value:null!=h?h:"",onChange:e=>j(String(e)),className:"form-control ps-8",placeholder:"Search all columns..."})})}),m.find(e=>"create"==e)?(0,t.jsx)("div",{className:"col hp-flex-none w-auto",children:(0,t.jsxs)(d.Button,{type:"button",className:"w-100 px-5",variant:"gradient",color:"cyan","data-bs-toggle":"modal","data-bs-target":"#addNew",children:[(0,t.jsx)("i",{className:"ri-add-line remix-icon"})," Add ",f]})}):(0,t.jsx)(t.Fragment,{}),(0,t.jsx)("div",{className:"modal fade -mt-2",id:"addNew",tabIndex:-1,"aria-labelledby":"addNewLabel","aria-hidden":"true",children:(0,t.jsx)("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header py-16 px-24",children:[(0,t.jsxs)("h5",{className:"modal-title font-bold",id:"addNewLabel",children:["Add ",f]}),(0,t.jsx)("button",{type:"button",className:"btn-close hp-bg-none d-flex align-items-center justify-content-center","data-bs-dismiss":"modal","aria-label":"Close",children:(0,t.jsx)("i",{className:"ri-close-line hp-text-color-dark-0 lh-1",style:{fontSize:"24px"}})})]}),(0,t.jsx)("div",{className:"divider m-0"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a={jalan:e.target.jalan.value,block:e.target.block.value,no:e.target.no.value,rt:e.target.rt.value,rw:e.target.rw.value,kel:e.target.kel.value,kec:e.target.kec.value,kabkot:e.target.kabkot.value,prov:e.target.prov.value,kodepos:e.target.kodepos.value};handleApi("create",{npwp:e.target.npwp.value,name:e.target.name.value,phone:e.target.phone.value,address:a})},id:"formCreate",children:[(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsx)("div",{className:"row gx-8",children:g.length?null==g?void 0:g.map((e,a)=>{var l,s,r;return(0,t.jsx)("div",{className:e.full?"col-12 col-md-12":"col-12 col-md-6",children:"text"===e.type||"number"===e.type||"email"===e.type||"date"===e.type?(0,t.jsx)("div",{className:"mb-24",children:(0,t.jsx)(d.Input,{type:e.type,required:e.required,variant:"standard",className:"border-b-1",label:(null!==(l=e.label)&&void 0!==l?l:"npwp"===e.name)?"NPWP":convertCamelCase(null!==(s=e.label)&&void 0!==s?s:e.name),name:e.name,id:e.id})}):"address"===e.type?(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"border-1 border-gray-500 p-2 rounded-lg shadow-sm",children:[(0,t.jsx)("label",{className:"-mt-5 absolute bg-white px-1 text-gray-500",children:"Address"}),(0,t.jsxs)("div",{className:"xl:flex",children:[(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"jalan",className:"border-b-1",type:"text",variant:"standard",label:"Jalan"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"block",className:"border-b-1",type:"text",variant:"standard",label:"Block"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"no",className:"border-b-1",type:"number",variant:"standard",label:"No"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"rt",className:"border-b-1",type:"number",variant:"standard",label:"RT"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"rw",className:"border-b-1",type:"number",variant:"standard",label:"RW"})})]}),(0,t.jsxs)("div",{className:"xl:flex",children:[(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"kec",className:"border-b-1",type:"text",variant:"standard",label:"Kecamatan"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"kel",className:"border-b-1",type:"text",variant:"standard",label:"Keluarahan"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"prov",className:"border-b-1",type:"text",variant:"standard",label:"Provinsi"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"kabkot",className:"border-b-1",type:"text",variant:"standard",label:"Kabupaten/Kota"})}),(0,t.jsx)("div",{className:"mt-3 w-full",children:(0,t.jsx)(d.Input,{required:!0,name:"kodepos",className:"border-b-1",type:"number",variant:"standard",label:"Kode POS"})})]})]})})}):"selectMulti"===e.type?(0,t.jsxs)("div",{className:"mb-24",children:[(0,t.jsxs)("label",{className:"form-label font-normal",children:[convertCamelCase(null!==(r=e.label)&&void 0!==r?r:e.name),(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)(i.Z,{multi:!0,name:e.name,data:x,required:e.required})]}):null},a)}):null})}),(0,t.jsxs)("div",{className:"modal-footer pt-0 px-24 pb-24",children:[(0,t.jsx)("div",{className:"divider"}),(0,t.jsx)(d.Button,{type:"submit",className:"w-full",color:"blue",children:"Submit"})]})]})]})})})]})}),(0,t.jsx)("div",{className:"col-12",children:(0,t.jsx)("div",{className:"card hp-contact-card mb-32 -mt-3 shadow-md",children:(0,t.jsx)("div",{className:"card-body px-0 ",children:(0,t.jsx)(c.Z,{search:h,action:{delete:m.find(e=>"delete"==e)?N:null,edit:m.find(e=>"edit"==e)?N:null},urlFatch:N,modalData:g,Subject:f,reload:p})})})})]})]})}}},function(e){e.O(0,[77,298,35,774,888,179],function(){return e(e.s=1433)}),_N_E=e.O()}]);