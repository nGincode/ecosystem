(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{2586:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/permission",function(){return l(2728)}])},2728:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return Permission}});var s=l(5893),n=l(7294),i=l(6501),d=l(9335),c=l(6154),t=l(1664),r=l.n(t),o=l(2824),m=l(8036),h=l(9761),x=l(2078);function Permission(e){let{userData:a,setuserData:l}=e,[t,u]=(0,n.useState)([]),[v,j]=(0,n.useState)(),[f,b]=(0,n.useState)(""),w="/api/permission",N="Permission";"undefined"!=typeof document&&(document.title=N);let handleApi=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("create"===e)try{await (0,c.Z)({method:"POST",url:w,data:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{j(e.data.data),i.ZP.success(e.data.massage),$(".btn-close").trigger("click"),document.getElementById("formCreate").reset()})}catch(e){var l,s;i.ZP.error(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.massage)}};(0,n.useEffect)(()=>{var e,l,s,n,i,d;u(null!==(d=null==a?void 0:null===(i=a.permission)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:null===(s=n.map(e=>e.data.find(e=>{if(e.label==N)return e})))||void 0===s?void 0:null===(l=s.filter(e=>void 0!==e))||void 0===l?void 0:null===(e=l[0])||void 0===e?void 0:e.checklist)&&void 0!==d?d:[])},[a]);let p=(0,x.Z)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"row mb-32 gy-32",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"row justify-content-between gy-32",children:(0,s.jsx)("div",{className:"col hp-flex-none w-auto",children:(0,s.jsx)("nav",{"aria-label":"breadcrumb",children:(0,s.jsxs)("ol",{className:"breadcrumb",children:[(0,s.jsx)("li",{className:"breadcrumb-item",children:(0,s.jsx)(r(),{href:"/",children:"Home"})}),(0,s.jsx)("li",{className:"breadcrumb-item active",children:N})]})})})})}),(0,s.jsx)("div",{className:"col-12 mt-10",children:(0,s.jsxs)("div",{className:"row g-16 align-items-center justify-content-end",children:[(0,s.jsx)("div",{className:"col-12 col-md-6 col-xl-4",children:(0,s.jsx)("div",{className:"input-group align-items-center",children:(0,s.jsx)(m.Z,{value:null!=f?f:"",onChange:e=>b(String(e)),className:"form-control ps-8",placeholder:"Search all columns..."})})}),t.find(e=>"create"==e)?(0,s.jsx)("div",{className:"col hp-flex-none w-auto",children:(0,s.jsxs)(d.Button,{type:"button",className:"w-100 px-5",variant:"gradient",color:"cyan","data-bs-toggle":"modal","data-bs-target":"#addNew",children:[(0,s.jsx)("i",{className:"ri-add-line remix-icon"})," Add ",N]})}):null,(0,s.jsx)("div",{className:"modal fade -mt-2 ",id:"addNew",tabIndex:-1,"aria-labelledby":"addNewLabel","aria-hidden":"true",children:(0,s.jsx)("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header py-16 px-24",children:[(0,s.jsxs)("h5",{className:"modal-title font-bold",id:"addNewLabel",children:["Add ",N]}),(0,s.jsx)("button",{type:"button",className:"btn-close hp-bg-none d-flex align-items-center justify-content-center","data-bs-dismiss":"modal","aria-label":"Close",children:(0,s.jsx)("i",{className:"ri-close-line hp-text-color-dark-0 lh-1",style:{fontSize:"24px"}})})]}),(0,s.jsx)("div",{className:"divider m-0"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=p.map(a=>{let l=!1,s=a.data.map(a=>{if(a.option){let s=!1,n=a.option.map(a=>{let l=e.target[a.name][0].checked?"view":null,n=e.target[a.name][1].checked?"create":null,i=e.target[a.name][2].checked?"edit":null,d=e.target[a.name][3].checked?"delete":null;return l&&(s=!0),{label:a.label,name:a.name,link:a.link,checklist:[l,n,i,d]}});return s&&(l=!0),{label:a.label,check:s,data:n}}{let s=e.target[a.name][0].checked?"view":null,n=e.target[a.name][1].checked?"create":null,i=e.target[a.name][2].checked?"edit":null,d=e.target[a.name][3].checked?"delete":null;return s&&(l=!0),{label:a.label,name:a.name,link:a.link,checklist:[s,n,i,d]}}});return{label:a.label,check:l,data:s}});handleApi("create",{name:e.target.name.value,view:e.target.view_val.value,perm:a})},id:"formCreate",children:[(0,s.jsx)("div",{className:"modal-body",children:(0,s.jsxs)("div",{className:"row gx-8",children:[(0,s.jsx)("div",{className:"mb-5",children:(0,s.jsx)(d.Input,{label:"Name Permission",variant:"standard",required:!0,type:"text",className:"border-b-1",name:"name",autoComplete:""})}),(0,s.jsxs)("div",{className:"flex mb-3",children:[(0,s.jsx)("div",{className:"w-1/2"}),(0,s.jsx)("div",{className:"w-1/6 justify-center flex",children:(0,s.jsx)(d.IconButton,{size:"sm",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),(0,s.jsx)("div",{className:"w-1/6 justify-center flex",children:(0,s.jsx)(d.IconButton,{color:"blue",size:"sm",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"})})})}),(0,s.jsx)("div",{className:"w-1/6  justify-center flex",children:(0,s.jsx)(d.IconButton,{color:"green",size:"sm",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:[(0,s.jsx)("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32l8.4-8.4z"}),(0,s.jsx)("path",{d:"M5.25 5.25a3 3 0 00-3 3v10.5a3 3 0 003 3h10.5a3 3 0 003-3V13.5a.75.75 0 00-1.5 0v5.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5V8.25a1.5 1.5 0 011.5-1.5h5.25a.75.75 0 000-1.5H5.25z"})]})})}),(0,s.jsx)("div",{className:"w-1/6  justify-center flex",children:(0,s.jsx)(d.IconButton,{color:"red",size:"sm",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})})]}),p.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex mt-3 font-bold",children:(0,s.jsx)("div",{className:"w-1/2",children:e.label})}),e.data.map((e,a)=>e.checklist?(0,s.jsxs)("div",{className:"flex mt-1 ml-2",children:[(0,s.jsxs)("div",{className:"w-1/2 ml-2 m-auto",children:[" ",e.label]}),(0,s.jsx)("div",{className:"w-1/6 justify-center flex",children:e.checklist.find(e=>"view"===e)?(0,s.jsx)(d.Checkbox,{name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})}),(0,s.jsx)("div",{className:"w-1/6 justify-center flex",children:e.checklist.find(e=>"create"===e)?(0,s.jsx)(d.Checkbox,{color:"blue",name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})}),(0,s.jsx)("div",{className:"w-1/6  justify-center flex",children:e.checklist.find(e=>"edit"===e)?(0,s.jsx)(d.Checkbox,{color:"green",name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})}),(0,s.jsx)("div",{className:"w-1/6  justify-center flex",children:e.checklist.find(e=>"delete"===e)?(0,s.jsx)(d.Checkbox,{color:"red",name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})})]},a):(0,s.jsxs)("div",{className:"ml-2",children:[(0,s.jsx)("div",{className:"flex my-2 font-semibold",children:(0,s.jsx)("div",{className:"w-1/2",children:e.label})}),e.option.map((e,a)=>(0,s.jsxs)("div",{className:"flex mt-1 ml-2",children:[(0,s.jsxs)("div",{className:"w-1/2 ml-2 m-auto",children:[" ",e.label]}),(0,s.jsx)("div",{className:"w-1/6 justify-center flex",children:e.checklist.find(e=>"view"===e)?(0,s.jsx)(d.Checkbox,{name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})}),(0,s.jsx)("div",{className:"w-1/6 justify-center flex",children:e.checklist.find(e=>"create"===e)?(0,s.jsx)(d.Checkbox,{color:"blue",name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})}),(0,s.jsx)("div",{className:"w-1/6  justify-center flex",children:e.checklist.find(e=>"edit"===e)?(0,s.jsx)(d.Checkbox,{color:"green",name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})}),(0,s.jsx)("div",{className:"w-1/6  justify-center flex",children:e.checklist.find(e=>"delete"===e)?(0,s.jsx)(d.Checkbox,{color:"red",name:e.name}):(0,s.jsx)(d.Checkbox,{hidden:!0,name:e.name})})]},a))]},a))]},a)),(0,s.jsx)("div",{className:"mb-5 mt-3",children:(0,s.jsx)(h.Z,{data:[{label:"All",value:"all"},{label:"User",value:"user"}],label:"View Data",variant:"standard",required:!0,type:"text",className:"border-b-1",name:"view",autoComplete:""})})]})}),(0,s.jsxs)("div",{className:"modal-footer pt-0 px-24 pb-24",children:[(0,s.jsx)("div",{className:"divider"}),(0,s.jsx)(d.Button,{type:"submit",className:"w-full",color:"blue",children:"Submit"})]})]})]})})})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card hp-contact-card mb-32 -mt-3 shadow-md",children:(0,s.jsx)("div",{className:"card-body px-0 ",children:(0,s.jsx)(o.Z,{search:f,action:{delete:t.find(e=>"delete"==e)?w:null,edit:t.find(e=>"edit"==e)?w:null},urlFatch:w,modalData:[{name:"name",type:"text",id:"name",full:!0,required:!0},{full:!0,type:"permission",required:!0,data:p},{name:"view",label:"View Data",type:"reactSelect",select:[{label:"All",value:"all"},{label:"User",value:"user"}],full:!0,required:!0}],Subject:N,reload:v})})})})]})})}}},function(e){e.O(0,[852,35,774,888,179],function(){return e(e.s=2586)}),_N_E=e.O()}]);