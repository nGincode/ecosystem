(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{6896:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(5139)}])},5139:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Profile}});var l=s(5893),t=s(7294),r=s(6501),i=s(9335),d=s(5675),n=s.n(d),o=s(5121),c=s(381),m=s.n(c);function Profile(e){var a,s,d,c,p;let{userData:h,setuserData:x}=e;"undefined"!=typeof document&&(document.title="Profile");let[u,b]=(0,t.useState)(1),convertFileToBase64=e=>new Promise((a,s)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=()=>a(l.result),l.onerror=s}),handleApi=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("change_user"===e)try{await (0,o.Z)({method:"PUT",url:"/api/user",data:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{r.ZP.success(e.data.massage),Array.isArray(e.data.data.permission.data)?e.data.data.permission=null:e.data.data.permission.data=JSON.parse(e.data.data.permission.data),x(e.data.data),localStorage.setItem("token",e.data.token),$(".btn-close").trigger("click")})}catch(e){console.log(e)}else if("change_pass"===e)try{await (0,o.Z)({method:"PUT",url:"/api/user",data:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{r.ZP.success(e.data.massage),document.getElementById("profileOldPassword").value="",document.getElementById("profileConfirmPassword").value="",document.getElementById("profileNewPassword").value=""})}catch(e){r.ZP.error(e.response.data.massage)}else if("avatar"===e)try{let e=await convertFileToBase64(a);await (0,o.Z)({method:"PUT",url:"/api/user",data:{files:e},headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{Array.isArray(e.data.data.permission.data)?e.data.data.permission=null:e.data.data.permission.data=JSON.parse(e.data.data.permission.data),r.ZP.success(e.data.massage),x(e.data.data)})}catch(e){r.ZP.error(e.response.data.massage)}},uploadAvatar=e=>{handleApi("avatar",e.target.files[0])};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("h1",{className:"hp-mb-0 text-4xl font-bold",children:"Profile"})}),(0,l.jsx)("div",{className:"row mb-32 gy-32",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsx)("div",{className:"row hp-profile-mobile-menu-btn bg-black-0 hp-bg-color-dark-100 rounded py-12 px-8 px-sm-12 mb-16 mx-0",children:(0,l.jsx)("div",{className:"d-inline-block","data-bs-toggle":"offcanvas","data-bs-target":"#profileMobileMenu","aria-controls":"profileMobileMenu",children:(0,l.jsx)("button",{type:"button",className:"btn btn-text btn-icon-only",children:(0,l.jsx)("i",{className:"ri-menu-fill hp-text-color-black-80 hp-text-color-dark-30 lh-1",style:{fontSize:"24px"}})})})}),(0,l.jsxs)("div",{className:"row bg-black-0 hp-bg-color-dark-100 rounded pe-16 pe-sm-32 mx-0",children:[(0,l.jsxs)("div",{className:"col hp-profile-menu py-24",style:{flex:"0 0 240px"},children:[(0,l.jsx)("div",{className:"w-100",children:(0,l.jsxs)("div",{className:"hp-profile-menu-header mt-16 mt-lg-0 text-center",children:[(0,l.jsxs)("div",{className:"hp-menu-header-btn mb-12 text-end",children:[(0,l.jsx)("div",{className:"d-inline-block",id:"profile-menu-dropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,l.jsx)("button",{type:"button",className:"btn btn-text btn-icon-only",children:(0,l.jsx)("i",{className:"ri-more-2-line text-black-100 hp-text-color-dark-30 lh-1",style:{fontSize:"24px"}})})}),(0,l.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"profile-menu-dropdown",children:(0,l.jsx)("li",{children:(0,l.jsxs)("label",{htmlFor:"file",children:[(0,l.jsx)("span",{className:"dropdown-item","aria-hidden":"true",children:"Change Avatar"}),(0,l.jsx)("input",{type:"file",id:"file",name:"file",accept:"image/*",style:{display:"none"},onChange:e=>uploadAvatar(e)})]})})})]}),(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsxs)("div",{className:"d-inline-block position-relative",children:[h.img?(0,l.jsx)("div",{className:"avatar-item d-flex align-items-center justify-content-center rounded-circle",style:{width:"80px",height:"80px"},children:(0,l.jsx)(n(),{width:100,height:100,alt:"",src:h.img,className:"object-cover rounded-full w-20 h-20"})}):(0,l.jsx)("div",{className:"avatar-item d-flex align-items-center justify-content-center rounded-circle",style:{width:"80px",height:"80px"},children:(0,l.jsx)(n(),{width:100,height:100,alt:"",src:"/app-assets/img/memoji/memoji-1.png"})}),(0,l.jsx)("span",{className:"position-absolute translate-middle badge rounded-pill bg-primary text-white border-none",children:"Online"})]})}),(0,l.jsx)("h3",{className:"mt-24 mb-4",children:null!==(a=h.fullName)&&void 0!==a?a:h.username}),(0,l.jsx)("a",{href:"mailto:".concat(h.email),className:"hp-p1-body",children:h.email})]})}),(0,l.jsx)("div",{className:"hp-profile-menu-body w-100 text-start mt-48 mt-lg-0",children:(0,l.jsxs)("ul",{className:"me-n1 mx-lg-n12",children:[(0,l.jsx)("li",{className:"mt-4 mb-16",children:(0,l.jsxs)("a",{onClick:()=>{b(1)},className:1===u?"cursor-pointer active position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center":"position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center cursor-pointer ",children:[(0,l.jsx)("i",{className:"iconly-Curved-User me-16"}),(0,l.jsx)("span",{children:"Personal Information"}),(0,l.jsx)("span",{className:"hp-menu-item-line position-absolute opacity-0 h-100 top-0 end-0 bg-primary hp-bg-dark-0",style:{width:"2px"}})]})}),(0,l.jsx)("li",{className:"mt-4 mb-16",children:(0,l.jsxs)("a",{onClick:()=>{b(2)},className:2===u?"cursor-pointer active position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center":"position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center cursor-pointer ",children:[(0,l.jsx)("i",{className:"iconly-Curved-Password me-16"}),(0,l.jsx)("span",{children:"Password Change"}),(0,l.jsx)("span",{className:"hp-menu-item-line position-absolute opacity-0 h-100 top-0 end-0 bg-primary hp-bg-dark-0",style:{width:"2px"}})]})})]})}),(0,l.jsx)("div",{className:"hp-profile-menu-footer",children:(0,l.jsx)(n(),{width:200,height:200,src:"/app-assets/img/pages/profile/menu-img.svg",alt:"Profile Image"})})]}),(0,l.jsxs)("div",{className:"hp-profile-mobile-menu offcanvas offcanvas-start",tabIndex:-1,id:"profileMobileMenu","aria-labelledby":"profileMobileMenuLabel",children:[(0,l.jsxs)("div",{className:"offcanvas-header",children:[(0,l.jsxs)("div",{className:"hp-menu-header-btn text-end",children:[(0,l.jsx)("div",{className:"d-inline-block",id:"profile-menu-dropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,l.jsx)("button",{type:"button",className:"btn btn-text btn-icon-only",children:(0,l.jsx)("i",{className:"ri-more-2-line text-black-100 hp-text-color-dark-30 lh-1",style:{fontSize:"24px"}})})}),(0,l.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"profile-menu-dropdown",children:(0,l.jsx)("li",{children:(0,l.jsxs)("label",{htmlFor:"file",children:[(0,l.jsx)("span",{className:"dropdown-item","aria-hidden":"true",children:"Change Avatar"}),(0,l.jsx)("input",{type:"file",id:"file",name:"file",accept:"image/*",style:{display:"none"},onChange:e=>uploadAvatar(e)})]})})})]}),(0,l.jsx)("div",{className:"d-inline-block",id:"profile-menu-dropdown","data-bs-dismiss":"offcanvas","aria-label":"Close",children:(0,l.jsx)("button",{id:"profileClose",type:"button",className:"btn btn-text btn-icon-only",children:(0,l.jsx)("i",{className:"ri-close-fill text-black-80 lh-1",style:{fontSize:"24px"}})})})]}),(0,l.jsx)("div",{className:"offcanvas-body p-0",children:(0,l.jsxs)("div",{className:"col hp-profile-menu py-24",style:{flex:"0 0 240px"},children:[(0,l.jsx)("div",{className:"w-100",children:(0,l.jsxs)("div",{className:"hp-profile-menu-header mt-16 mt-lg-0 text-center",children:[(0,l.jsxs)("div",{className:"hp-menu-header-btn mb-12 text-end",children:[(0,l.jsx)("div",{className:"d-inline-block",id:"profile-menu-dropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,l.jsx)("button",{type:"button",className:"btn btn-text btn-icon-only",children:(0,l.jsx)("i",{className:"ri-more-2-line text-black-100 hp-text-color-dark-30 lh-1",style:{fontSize:"24px"}})})}),(0,l.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"profile-menu-dropdown",children:(0,l.jsx)("li",{children:(0,l.jsxs)("label",{htmlFor:"file",children:[(0,l.jsx)("span",{className:"dropdown-item","aria-hidden":"true",children:"Change Avatar"}),(0,l.jsx)("input",{type:"file",id:"file",name:"file",accept:"image/*",style:{display:"none"},onChange:e=>uploadAvatar(e)})]})})})]}),(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsxs)("div",{className:"d-inline-block position-relative",children:[h.img?(0,l.jsx)("div",{className:"avatar-item d-flex align-items-center justify-content-center rounded-circle",style:{width:"80px",height:"80px"},children:(0,l.jsx)(n(),{width:100,height:100,alt:"",src:h.img})}):(0,l.jsx)("div",{className:"avatar-item d-flex align-items-center justify-content-center rounded-circle",style:{width:"80px",height:"80px"},children:(0,l.jsx)(n(),{width:100,height:100,alt:"",src:"/app-assets/img/memoji/memoji-1.png"})}),(0,l.jsx)("span",{className:"position-absolute translate-middle badge rounded-pill bg-primary text-white border-none",children:"Online"})]})}),(0,l.jsx)("h3",{className:"mt-24 mb-4",children:null!==(s=h.fullName)&&void 0!==s?s:h.username}),(0,l.jsx)("a",{href:"mailto:".concat(h.email),className:"hp-p1-body",children:h.email})]})}),(0,l.jsx)("div",{className:"hp-profile-menu-body w-100 text-start mt-48 mt-lg-0",children:(0,l.jsxs)("ul",{className:"me-n1 mx-lg-n12",children:[(0,l.jsx)("li",{className:"mt-4 mb-16",children:(0,l.jsxs)("a",{onClick:()=>{b(1),$("#profileClose").trigger("click")},className:1===u?"cursor-pointer active position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center":"position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center cursor-pointer ",children:[(0,l.jsx)("i",{className:"iconly-Curved-User me-16"}),(0,l.jsx)("span",{children:"Personal Information"}),(0,l.jsx)("span",{className:"hp-menu-item-line position-absolute opacity-0 h-100 top-0 end-0 bg-primary hp-bg-dark-0",style:{width:"2px"}})]})}),(0,l.jsx)("li",{className:"mt-4 mb-16",children:(0,l.jsxs)("a",{onClick:()=>{b(2),$("#profileClose").trigger("click")},className:2===u?"cursor-pointer active position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center":"position-relative text-black-80 hp-text-color-dark-30 hp-hover-text-color-primary-1 hp-hover-text-color-dark-0 py-12 px-24 d-flex align-items-center cursor-pointer ",children:[(0,l.jsx)("i",{className:"iconly-Curved-Password me-16"}),(0,l.jsx)("span",{children:"Password Change"}),(0,l.jsx)("span",{className:"hp-menu-item-line position-absolute opacity-0 h-100 top-0 end-0 bg-primary hp-bg-dark-0",style:{width:"2px"}})]})})]})}),(0,l.jsx)("div",{className:"hp-profile-menu-footer",children:(0,l.jsx)(n(),{width:200,height:200,src:"/app-assets/img/pages/profile/menu-img.svg",alt:"Profile Image"})})]})})]}),1===u?(0,l.jsx)("div",{className:"col ps-16 ps-sm-32 py-24 py-sm-32 overflow-hidden",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-12 col-md-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Personal Informations"}),(0,l.jsx)("p",{className:"hp-p1-body mb-0",children:"Your data accounts"})]}),(0,l.jsx)("div",{className:"divider border-black-40 hp-border-color-dark-80"}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsxs)("div",{className:"row align-items-center justify-content-between",children:[(0,l.jsx)("div",{className:"col-12 col-md-6",children:(0,l.jsx)("h3",{children:"Contact"})}),(0,l.jsx)("div",{className:"col-12 col-md-6 hp-profile-action-btn text-end",children:(0,l.jsx)("button",{className:"btn btn-ghost btn-primary","data-bs-toggle":"modal","data-bs-target":"#profileContactEditModal",children:"Edit"})}),(0,l.jsx)("div",{className:"col-12 hp-profile-content-list mt-8 pb-0 pb-sm-120",children:(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("span",{className:"hp-p1-body",children:"Full Name"}),(0,l.jsx)("span",{className:"mt-0 mt-sm-4 hp-p1-body text-black-100 hp-text-color-dark-0",children:null!==(d=h.fullName)&&void 0!==d?d:"-"})]}),(0,l.jsxs)("li",{className:"mt-18",children:[(0,l.jsx)("span",{className:"hp-p1-body",children:"Username"}),(0,l.jsx)("span",{className:"mt-0 mt-sm-4 hp-p1-body text-black-100 hp-text-color-dark-0",children:h.username})]}),(0,l.jsxs)("li",{className:"mt-18",children:[(0,l.jsx)("span",{className:"hp-p1-body",children:"Email"}),(0,l.jsx)("span",{className:"mt-0 mt-sm-4 hp-p1-body text-black-100 hp-text-color-dark-0",children:h.email})]}),(0,l.jsxs)("li",{className:"mt-18",children:[(0,l.jsx)("span",{className:"hp-p1-body",children:"Phone"}),(0,l.jsx)("a",{className:"mt-0 mt-sm-4 hp-p1-body text-black-100 hp-text-color-dark-0",href:"tel:".concat(h.phone),children:null!==(c=h.phone)&&void 0!==c?c:"-"})]}),(0,l.jsxs)("li",{className:"mt-18",children:[(0,l.jsx)("span",{className:"hp-p1-body",children:"Date of Birth"}),(0,l.jsx)("span",{className:"mt-0 mt-sm-4 hp-p1-body text-black-100 hp-text-color-dark-0",children:h.dateOfBirth?m()(h.dateOfBirth).format("DD/MM/YYYY"):"-"})]}),(0,l.jsxs)("li",{className:"mt-18",children:[(0,l.jsx)("span",{className:"hp-p1-body",children:"Address"}),(0,l.jsx)("span",{className:"mt-0 mt-sm-4 hp-p1-body text-black-100 hp-text-color-dark-0",children:null!==(p=h.address)&&void 0!==p?p:"-"})]})]})})]})})]})}):2===u?(0,l.jsx)("div",{className:"col ps-16 ps-sm-32 py-24 py-sm-32 overflow-hidden",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Change Password"}),(0,l.jsx)("p",{className:"hp-p1-body mb-0",children:"Set a unique password to protect your account."})]}),(0,l.jsx)("div",{className:"divider border-black-40 hp-border-color-dark-80"}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-12 col-sm-8 col-md-7 col-xl-5 col-xxxl-3",children:(0,l.jsxs)("form",{onSubmit:e=>(e.preventDefault(),e.target.old_password.value.length<1||e.target.password.value.length<1||e.target.confirm_password.value.length<1)?(r.ZP.error("Password required"),!1):e.target.old_password.value.length<8||e.target.password.value.length<8||e.target.confirm_password.value.length<8?(r.ZP.error("Password min 8 char"),!1):e.target.password.value!==e.target.confirm_password.value?(r.ZP.error("Password not match"),!1):void handleApi("change_pass",{old_password:e.target.old_password.value,password:e.target.password.value,confirm_password:e.target.confirm_password.value}),id:"submitPassword",children:[(0,l.jsx)("div",{className:"mb-24",children:(0,l.jsx)(i.Input,{label:"Old Password",variant:"standard",required:!0,type:"password",className:"border-b-1",id:"profileOldPassword",name:"old_password"})}),(0,l.jsx)("div",{className:"mb-24",children:(0,l.jsx)(i.Input,{label:"New Password",variant:"standard",required:!0,type:"password",className:"border-b-1",id:"profileNewPassword",name:"password"})}),(0,l.jsx)("div",{className:"mb-24",children:(0,l.jsx)(i.Input,{label:"Confirm New Password",variant:"standard",required:!0,type:"password",className:"border-b-1",id:"profileConfirmPassword",name:"confirm_password"})}),(0,l.jsx)(i.Button,{color:"red",type:"submit",className:"w-100",children:"Change Password"})]})})})})]})}):(0,l.jsx)(l.Fragment,{})]})]})}),(0,l.jsx)("div",{className:"modal fade",id:"profileContactEditModal",tabIndex:-1,"aria-labelledby":"profileContactEditModalLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog modal-dialog-centered",style:{maxWidth:"416px"},children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header py-16",children:[(0,l.jsx)("h5",{className:"modal-title font-bold",id:"profileContactEditModalLabel",children:"Profile Edit"}),(0,l.jsx)("button",{type:"button",className:"btn-close hp-bg-none d-flex align-items-center justify-content-center","data-bs-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("i",{className:"ri-close-line hp-text-color-dark-0 lh-1",style:{fontSize:"24px"}})})]}),(0,l.jsx)("div",{className:"divider my-0"}),(0,l.jsx)("div",{className:"modal-body py-48",children:(0,l.jsx)("form",{onSubmit:e=>{e.preventDefault(),handleApi("change_user",{username:e.target.username.value,email:e.target.email.value,fullName:e.target.fullName.value,phone:e.target.phone.value,address:e.target.address.value,dateOfBirth:e.target.dateOfBirth.value})},children:(0,l.jsxs)("div",{className:"row g-24",children:[(0,l.jsx)("div",{className:"col-12 -mt-2",children:(0,l.jsx)(i.Input,{label:"Full Name",variant:"standard",required:!0,type:"text",className:"border-b-1",name:"fullName",id:"fullName",defaultValue:h.fullName})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)(i.Input,{label:"Username",variant:"standard",required:!0,type:"text",className:"border-b-1",name:"username",id:"username",defaultValue:h.username})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)(i.Input,{label:"Email",variant:"standard",required:!0,type:"email",className:"border-b-1",name:"email",id:"email",defaultValue:h.email})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)(i.Input,{label:"Date of Birth",variant:"standard",required:!0,type:"date",className:"border-b-1",name:"dateOfBirth",id:"dateOfBirth",defaultValue:h.dateOfBirth})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)(i.Input,{label:"Phone",variant:"standard",required:!0,type:"text",className:"border-b-1",name:"phone",id:"nophone",defaultValue:h.phone})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)(i.Textarea,{label:"Address",variant:"standard",required:!0,name:"address",id:"address",className:"border-b-1",defaultValue:h.address})}),(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)(i.Button,{color:"blue",type:"submit",className:" w-100",children:"Edit"})}),(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)("div",{className:"btn w-100","data-bs-dismiss":"modal",children:"Cancel"})})]})})})]})})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6896)}),_N_E=e.O()}]);