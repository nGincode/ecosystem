(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{4414:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/report",function(){return a(2163)}])},8036:function(e,t,a){"use strict";a.d(t,{Z:function(){return DebouncedInput}});var l=a(5893),n=a(7294),r=a(9335);function DebouncedInput(e){let{value:t,onChange:a,debounce:s=500,placeholder:d}=e,[i,o]=(0,n.useState)(t);return(0,n.useEffect)(()=>{o(t)},[t]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{a(i)},s);return()=>clearTimeout(e)},[s,a,i]),(0,l.jsx)(r.Input,{label:d,className:"border-b-1",variant:"standard",value:i,onChange:e=>o(e.target.value)})}},2163:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Report}});var l=a(5893),n=a(7294),r=a(6501),s=a(9335),d=a(6154),i=a(4105),o=a(9761),c=a(8036);function Report(e){let{userData:t,setuserData:a}=e,[u,m]=(0,n.useState)([]),[v,p]=(0,n.useState)(),[h,f]=(0,n.useState)(),[x,N]=(0,n.useState)(""),j="Report";"undefined"!=typeof document&&(document.title=j),(0,n.useEffect)(()=>{var e,a,l,n,r,s;m(null!==(s=null==t?void 0:null===(r=t.permission)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:null===(l=n.map(e=>e.data.find(e=>{if(e.label==j)return e})))||void 0===l?void 0:null===(a=l.filter(e=>void 0!==e))||void 0===a?void 0:null===(e=a[0])||void 0===e?void 0:e.checklist)&&void 0!==s?s:[])},[t]);let handleApi=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("create"===e)try{var a;await (0,d.Z)({method:"POST",url:"/api/stock/export",data:{...t,company_id:null===(a=JSON.parse(localStorage.getItem("companyActive")))||void 0===a?void 0:a.value},headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{ConvertToXLXS(e.data)})}catch(e){r.ZP.error(e.response.data.massage)}},ConvertToXLXS=e=>{var t=i.ZP.utils.aoa_to_sheet(e);i.ZP.writeFile({Sheets:{data:t},SheetNames:["data"]},"Report Stock.xlsx")};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("h1",{className:"hp-mb-0 text-4xl font-bold",children:j})}),(0,l.jsxs)("div",{className:"row mb-32 gy-32",children:[(0,l.jsx)("div",{className:"col-12 mt-10",children:(0,l.jsx)("div",{className:"row g-16 align-items-center justify-content-end",children:(0,l.jsx)("div",{className:"col-12 col-md-6 col-xl-4",children:(0,l.jsx)("div",{className:"input-group align-items-center",children:(0,l.jsx)(c.Z,{value:null!=x?x:"",onChange:e=>N(String(e)),className:"form-control ps-8",placeholder:"Search all columns..."})})})})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"card hp-contact-card mb-32 -mt-3 shadow-md",children:(0,l.jsxs)("div",{className:"card-body px-0 ",children:[(0,l.jsx)("h3",{className:"modal-title font-bold text-lg text-center",children:"Report Download"}),(0,l.jsxs)("form",{id:"createForm",onSubmit:e=>{e.preventDefault(),e.target.first_date.value<e.target.end_date.value&&r.ZP.error("First Date Not Valid"),handleApi("create",{type:e.target.type_val.value,first_date:e.target.first_date.value,end_date:e.target.end_date.value})},children:[(0,l.jsx)("div",{className:"modal-body",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"mb-5",children:(0,l.jsx)(o.Z,{id:"report",name:"type",data:[{label:"Report Stock",value:"stock"}],required:!0,label:"Type Report"})}),(0,l.jsx)("div",{className:"col-12 mb-5",children:(0,l.jsx)("div",{className:"input-group align-items-center",children:(0,l.jsx)(s.Input,{type:"date",id:"first_date",name:"first_date",label:"Start Date",variant:"standard"})})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"input-group align-items-center",children:(0,l.jsx)(s.Input,{type:"date",id:"end_date",name:"end_date",label:"End Date",variant:"standard"})})})]})}),(0,l.jsx)("div",{className:"modal-footer",children:(0,l.jsx)(s.Button,{type:"submit",className:"w-full",color:"blue",children:"Download"})})]})]})})})]})]})}},67:function(){},2061:function(){}},function(e){e.O(0,[251,774,888,179],function(){return e(e.s=4414)}),_N_E=e.O()}]);