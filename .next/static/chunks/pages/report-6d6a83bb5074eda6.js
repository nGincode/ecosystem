(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{4414:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/report",function(){return a(535)}])},2330:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var l=a(5893),n=a(7294),r=a(9335);function o(e){let{value:t,onChange:a,debounce:o=500,placeholder:s}=e,[i,c]=(0,n.useState)(t);return(0,n.useEffect)(()=>{c(t)},[t]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{a(i)},o);return()=>clearTimeout(e)},[o,a,i]),(0,l.jsx)(r.Input,{label:s,className:"border-b-1",variant:"standard",value:i,onChange:e=>c(e.target.value)})}},535:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var l=a(5893),n=a(7294),r=a(6501),o=a(9335),s=a(7066),i=a(4105),c=a(6448);a(6576);var d=a(3438),u=a(6071),m=a(2330),p=a(381),v=a.n(p);function f(e){let{userData:t,setuserData:a}=e,[p,f]=(0,n.useState)([]),[h,x]=(0,n.useState)(""),[b,N]=(0,n.useState)(!1),j="Report";"undefined"!=typeof document&&(document.title=j),(0,n.useEffect)(()=>{var e,a,l,n,r,o;f(null!==(o=null==t?void 0:null===(r=t.permission)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:null===(l=n.map(e=>e.data.find(e=>{if(e.label==j)return e})))||void 0===l?void 0:null===(a=l.filter(e=>void 0!==e))||void 0===a?void 0:null===(e=a[0])||void 0===e?void 0:e.checklist)&&void 0!==o?o:[])},[t]);let Y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(N(!0),"create"===e){let e="";"stock"==t.type?e="/stock":"pk"==t.type?e="/api/efaktur/out":"pm"==t.type&&(e="/api/efaktur/in");try{var a;await (0,s.Z)({method:"POST",url:"/api"+e+"/export",data:{...t,company_id:null===(a=JSON.parse(localStorage.getItem("companyActive")))||void 0===a?void 0:a.value},headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{g(e.data),N(!1)})}catch(e){r.ZP.error(e.response.data.massage),N(!1)}}},g=e=>{var t=i.ZP.utils.aoa_to_sheet(e);i.ZP.writeFile({Sheets:{data:t},SheetNames:["data"]},"Report Stock.xlsx")},[y,D]=(0,n.useState)([v()().format("YYYY-MM-DD"),v()().format("YYYY-MM-DD")]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{process:b,label:"Downloading"}),(0,l.jsx)("div",{className:"col-12 mb-5",children:(0,l.jsx)("h1",{className:"hp-mb-0 text-4xl font-bold",children:j})}),(0,l.jsxs)("div",{className:"row mb-32 gy-32",children:[(0,l.jsx)("div",{className:"col-12 mt-10",children:(0,l.jsx)("div",{className:"row g-16 align-items-center justify-content-end",children:(0,l.jsx)("div",{className:"col-12 col-md-6 col-xl-4",children:(0,l.jsx)("div",{className:"input-group align-items-center",children:(0,l.jsx)(m.Z,{value:null!=h?h:"",onChange:e=>x(String(e)),className:"form-control ps-8",placeholder:"Search all columns..."})})})})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"card hp-contact-card mb-32 -mt-3 shadow-md",children:(0,l.jsxs)("div",{className:"card-body px-0 ",children:[(0,l.jsx)("h3",{className:"modal-title font-bold text-lg text-center",children:"Report Download"}),(0,l.jsxs)("form",{id:"createForm",onSubmit:e=>{e.preventDefault(),Y("create",{type:e.target.type_val.value,first_date:y[0],end_date:y[1]})},children:[(0,l.jsx)("div",{className:"modal-body",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"mb-5",children:(0,l.jsx)(d.Z,{id:"report",name:"type",data:[{label:"Report Stock",value:"stock"},{label:"Report PK",value:"pk"},{label:"Report PM",value:"pm"}],required:!0,label:"Type Report"})}),(0,l.jsx)("div",{className:"input-group align-items-center",children:(0,l.jsx)(c.Z,{onCallback:(e,t)=>{D([v()(e).format("YYYY-MM-DD"),v()(t).format("YYYY-MM-DD")])},initialSettings:{startDate:v()(null==y?void 0:y[0]).format("DD/MM/YYYY"),endDate:v()(null==y?void 0:y[1]).format("DD/MM/YYYY")},children:(0,l.jsx)("input",{type:"text",className:"form-control text-center rounded-none ps-8 bg-transparent border-t-0 border-l-0 border-r-0 border-b-2"})})})]})}),(0,l.jsx)("div",{className:"modal-footer",children:(0,l.jsx)(o.Button,{type:"submit",className:"w-full",color:"blue",children:"Download"})})]})]})})})]})]})}},67:function(){},2061:function(){}},function(e){e.O(0,[251,466,888,774,179],function(){return e(e.s=4414)}),_N_E=e.O()}]);